(function(){"use strict";CodeMirror.defineMode("turtle",function(e){var n,t,r,a,o,i,l,s,u,c;return c=function(e){return new RegExp("^(?:"+e.join("|")+")$","i")},s=function(e,n){var t,o,i,l,s,c;return"MLL"===n.curPos?(e.eatWhile(/[^"]/),e.match(/"""/)&&(n.curPos="EOS"),"string-2"):(t=e.next(),i=!1,o=null,l=n.lastWasColon,n.lastWasColon=!1,!l&&("."===t&&e.match(/\d/)||(t>"0"&&"9">t||"-"===t||"+"===t)&&e.match(/[\d.+-eE]*\W/))?(e.eatWhile(/[\d]/),"object"===n.curPos?0===n.inLists&&(n.curPos="EOS"):i=!0,i?"number error":"number"):"<"!==t||e.match(/^[\s\u00a0=]/,!1)?'"'===t||"'"===t?("object"!==n.curPos&&(i=!0),0===n.inLists&&(n.curPos="EOS"),'"'===t&&e.match(/""/)?(n.curPos="MLL",e.eatWhile(/[^"]*/),"string-2"):(n.tokenize=u(t),i?n.tokenize(e,n)+" error":n.tokenize(e,n))):/[{}\(\),\.;\[\]]/.test(t)?(o=t,";"===o?("EOS"!==n.curPos&&(i=!0),n.curPos="property"):"."===o?n.curPos="subject":","===o?("EOS"!==n.curPos&&(i=!0),n.curPos="object"):"["===o?("object"!==n.curPos&&(i=!0),n.curPos="property"):"]"===o?n.curPos="EOS":"("===o?n.inLists++:")"===o&&n.inLists--,i?"punctuation error":"punctuation"):"#"===t?(e.skipToEnd(),"comment"):a.test(t)?(e.eatWhile(a),"operator"):":"===t?(n.lastWasColon=!0,"operator"):(e.eatWhile(l?/[_\w\d#:\\-]/:/[_\w\d\\-]/),":"===e.peek()?"variable-3":(c=e.current(),!l&&r.test(c)?("a"===c&&("property"!==n.curPos&&(i=!0),n.curPos="object"),i?"meta error":"meta"):"@"===t?"variable-2":"^"===t&&"^"===e.peek()?(e.next(),e.eatWhile(/[_\w\d:]/),"qualifier"):(s=void 0,s="subject"===n.curPos?"variable-2":"property"===n.curPos?"keyword":"object"===n.curPos?"string":"error","subject"===n.curPos?n.curPos="property":"property"===n.curPos?n.curPos="object":"object"===n.curPos&&0===n.inLists&&(n.curPos="EOS"),s))):(e.match(/^[^\s\u00a0>]*>?/),"subject"===n.curPos?n.curPos="property":"property"===n.curPos?n.curPos="object":"object"===n.curPos?0===n.inLists&&(n.curPos="EOS"):i=!0,i?"atom error":"atom"))},u=function(e){return function(n,t){var r,a;for(a=!1,r=void 0;null!=(r=n.next());){if(r===e&&!a){t.tokenize=s;break}a=!a&&"\\"===r}return"string-2"}},l=function(e,n,t){e.context={prev:e.context,indent:e.indent,col:t,type:n}},i=function(e){e.indent=e.context.indent,e.context=e.context.prev},t=e.indentUnit,n=void 0,o=c([]),r=c(["@prefix","@base","a"]),a=/[*+\-<>=&|]/,{startState:function(){return{tokenize:s,context:null,curPos:"subject",lastWasColon:!1,inLists:0,indent:0,col:0}},token:function(e,t){var r;if(e.sol()&&(t.context&&null==t.context.align&&(t.context.align=!1),t.indent=e.indentation()),e.eatSpace())return null;if(r=t.tokenize(e,t),"string"!==r&&t.context&&null==t.context.align&&"pattern"!==t.context.type&&(t.context.align=!0),"("===n)l(t,")",e.column());else if("["===n)l(t,"]",e.column());else if("{"===n)l(t,"}",e.column());else if(/[\]\}\)]/.test(n)){for(;t.context&&"pattern"===t.context.type;)i(t);t.context&&n===t.context.type&&i(t)}else"."===n&&t.context&&"pattern"===t.context.type?i(t):/atom|string|variable/.test(r)&&t.context&&(/[\}\]]/.test(t.context.type)?l(t,"pattern",e.column()):"pattern"!==t.context.type||t.context.align||(t.context.align=!0,t.context.col=e.column()));return r},fold:"indent",indent:function(e,r){var a,o,i;if(i=r&&r.charAt(0),o=e.context,/[\]\}]/.test(i))for(;o&&"pattern"===o.type;)o=o.prev;return a=o&&i===o.type,o?"pattern"===o.type?o.col:o.align?o.col+(a?0:1):o.indent+(a?0:t):";"===n?0!==e.indent?e.indent:t:0}}}),CodeMirror.defineMIME("text/turtle","turtle")}).call(this),function(){"use strict";angular.module("fi.seco.prefix",[]).factory("prefixService",["$http",function(e){var n,t,r,a,o,i;return n={},t={},i={},o={},a=0,e.get("http://prefix.cc/popular/all.file.json").success(function(e){var r,a,o;o=[];for(a in e)r=e[a],n[r]=a,o.push(t[a]=r);return o}),r=function(e,n){var t,r;return t=e.lastIndexOf("#",n),r=e.lastIndexOf("/",n),t>r?t:r},{reset:function(){return i={},o={}},setPrefixNsMap:function(e){return i=e,o=new function(){var e,n;for(n in i)e=i[n],this[e]=n;return this}},invert:function(e){return new function(){var n,t;for(t in e)n=e[t],this[n]=t;return this}},setPrefixNs:function(e,n){return o[n]=e,i[e]=n},expand:function(e){var n,t;return t=e.indexOf(":"),null!=i[e.substring(0,t)]?(n=i[e.substring(0,t)],i[e.substring(0,t)]+e.substring(t+1)):e},getPrefix:function(e,t){var r;return t||o[e],null!=(r=o[e])?r:n[e]},getNs:function(e,n){var r;return n||i[e],null!=(r=i[e])?r:t[e]},shortForm:function(e,t){var l,s,u,c,d,p,f;if(">"===e.charAt(e.length-1)&&-1!==e.indexOf('"^^<'))return f=e.substring(e.indexOf('"^^<')+4,e.length-1),p=this.sshortForm(f),{shortForm:e.substring(0,e.indexOf('"^^<')+3)+p.shortForm,ns:p.ns,prefix:p.prefix};if('"'===e.charAt(0))return{shortForm:e};if(f="<"===e.charAt(0)&&">"===e.charAt(e.length-1)?e.substring(1,e.length-1):e,u=r(f,f.length),-1!==u){for(;u>0;){if(null!=o[f.substring(0,u+1)])return d=o[f.substring(0,u+1)],{shortForm:d+":"+f.substring(u+1),ns:f.substring(0,u+1),prefix:d};u=r(f,u-1)}if(!t)return{shortForm:e};for(;u>0;){if(null!=n[f.substring(0,u+1)])return d=n[f.substring(0,u+1)],o[ns]=d,i[d]=ns,{shortForm:d+":"+f.substring(u+1),ns:f.substring(0,u+1),prefix:d,newPrefix:!0};u=r(f,u-1)}return u=r(f,f.length),c=r(f,u-1),-1!==c&&(f.charAt(c+1)<"0"||f.charAt(c+1)>"9")?(s=f.substring(c+1,u),i[s]&&(s="ns"+ ++a)):s="ns"+ ++a,l=f.substring(0,u+1),o[l]=s,i[s]=l,{shortForm:s+":"+f.substring(u+1),ns:l,prefix:s,newPrefix:!0}}return{shortForm:e}}}}])}.call(this),function(){"use strict";angular.module("fi.seco.sparql",[]).factory("sparql",["$http","$q",function(e,n){var t;return t={check:function(t,r){var a;return a=n.defer(),e(angular.extend({method:"GET",url:t,params:{query:"ASK {}"},headers:{Accept:"application/sparql-results+json"}},r)).then(function(e){return a.resolve(null!=e.data.boolean)},function(e){return a.reject(e)}),a.promise},checkUpdate:function(t,r){var a;return a=n.defer(),e(angular.extend({method:"POST",url:t,headers:{"Content-Type":"application/sparql-update"},data:"INSERT DATA {}"},r)).then(function(e){return a.resolve(204===e.status)},function(e){return a.reject(e)}),a.promise},checkRest:function(t,r){var a;return a=n.defer(),e(angular.extend({method:"POST",url:t+"?default",data:"",headers:{"Content-Type":"text/turtle"}},r)).then(function(e){return a.resolve(204===e.status)},function(e){return a.reject(e)}),a.promise},get:function(n,t,r){return e(angular.extend({method:"GET",url:n,params:null!=t?{graph:t}:{"default":""},headers:{Accept:"text/turtle"}},r))},post:function(n,t,r,a){return e(angular.extend({method:"POST",url:n,params:null!=r?{graph:r}:{"default":""},data:t,headers:{"Content-Type":"text/turtle"}},a))},put:function(n,t,r,a){return e(angular.extend({method:"PUT",url:n,params:null!=r?{graph:r}:{"default":""},data:t,headers:{"Content-Type":"text/turtle"}},a))},"delete":function(n,t,r){return e(angular.extend({method:"DELETE",url:n,params:null!=t?{graph:t}:{"default":""}},r))},construct:function(n,t,r){return e(t.length<=2048?angular.extend({method:"GET",url:n,params:{query:t},headers:{Accept:"text/turtle"}},r):angular.extend({method:"POST",url:n,data:t,headers:{"Content-Type":"application/sparql-query",Accept:"text/turtle"}},r))},query:function(n,t,r){return e(t.length<=2048?angular.extend({method:"GET",url:n,params:{query:t},headers:{Accept:"application/sparql-results+json"}},r):angular.extend({method:"POST",url:n,data:t,headers:{"Content-Type":"application/sparql-query",Accept:"application/sparql-results+json"}},r))},update:function(n,t,r){return e(angular.extend({method:"POST",url:n,headers:{"Content-Type":"application/sparql-update"},data:t},r))},bindingToString:function(e){var n;if(null==e)return"UNDEF";if(n=e.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\'/g,"\\'").replace(/\"/g,'\\"'),"uri"===e.type)return"<"+n+">";if("bnode"===e.type)return"_:"+n;if(null==e.datatype)return e["xml:lang"]?'"'+n+'"@'+e["xml:lang"]:'"'+n+'"';switch(e.datatype){case"http://www.w3.org/2001/XMLSchema#integer":case"http://www.w3.org/2001/XMLSchema#decimal":case"http://www.w3.org/2001/XMLSchema#double":case"http://www.w3.org/2001/XMLSchema#boolean":return n;case"http://www.w3.org/2001/XMLSchema#string":return'"'+n+'"';default:return'"'+n+'"^^<'+e.datatype+">"}}}}])}.call(this),function(){angular.module("snapper",["http-auth-interceptor","toastr","ngAnimate","ngStorage","ui.router","ui.codemirror","fi.seco.prefix","fi.seco.sparql"]).run(["$rootScope","$http","authService",function(e,n,t){return e.setAuth=function(){return e.authOpen=!1,n.defaults.headers.common.Authorization="Basic "+btoa(e.username+":"+e.password),t.loginConfirmed()},e.dismissAuth=function(){return e.authOpen=!1,t.loginCancelled({status:401},"Authentication required")},e.$on("event:auth-loginRequired",function(){return e.authOpen=!0})}]).config(["$stateProvider","$urlRouterProvider",function(e,n){return e.state("home",{url:"/?data&restEndpoint&sparqlEndpoint&graphIRI&configuration",templateUrl:"partials/main.html",controller:"MainCtrl"}),n.otherwise("/")}]).config(["toastrConfig",function(e){return angular.extend(e,{allowHtml:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",positionClass:"toast-top-full-width",tapToDismiss:!0,timeOut:1500,titleClass:"toast-title",toastClass:"toast"})}])}.call(this),function(){angular.module("snapper").controller("MainCtrl",["$scope","$http","toastr","$stateParams","$localStorage","prefixService","$q","sparql",function(e,n,t,r,a,o,i,l){var s,u,c,d,p,f,g,h,I,E,b,m,R,y,T,w,S,v,L,C,P,k,x,A,O,Q,q,j,M,N,U,F,B,V,Y,D,J,X,$,G,W,H,z,_,K,Z,en,nn,tn,rn,an,on,ln,sn,un,cn,dn,pn,fn,gn,hn;e.config={};for(V in r)an=r[V],e[V]=an;for(V in a)an=a[V],null==r[V]&&(e[V]=an);return e.sparqlEndpointInput=e.sparqlEndpoint,e.restEndpointInput=e.restEndpoint,e.graphIRIInput=null!==e.graphIRI?e.graphIRI:"default",e.$watch("config",function(e,n){return e!==n?a.confing=e:void 0}),e.$watch("graphIRIInput",function(n){return e.graphIRI="default"!==n?n:null}),e.$watch("graphIRI",function(e,n){return e!==n?a.graphIRI=e:void 0}),e.sparqlEndpointInputValid=!0,K=null,e.$watch("sparqlEndpointInput",function(n){return null!=n?(null!=K&&K.resolve(),K=i.defer(),l.check(n,{timeout:K.promise}).then(function(n){return e.sparqlEndpointInputValid=n},function(){return e.sparqlEndpointInputValid=!1})):void 0}),e.sparulEndpointInputValid=!0,Z=null,e.$watch("sparulEndpointInput",function(n){return null!=n?(null!=Z&&Z.resolve(),Z=i.defer(),l.checkUpdate(n,{timeout:Z.promise}).then(function(n){return e.sparulEndpointInputValid=n},function(){return e.sparulEndpointInputValid=!1})):void 0}),e.restEndpointInputValid=!0,z=null,e.$watch("restEndpointInput",function(n){return null!=n?(null!=z&&z.resolve(),z=i.defer(),l.checkRest(n,{timeout:z.promise}).then(function(n){return e.restEndpointInputValid=n},function(){return e.restEndpointInputValid=!1})):void 0}),e.$watch("sparqlEndpoint",function(n,t){return e.sparqlEndpointInput=n,n!==t&&(a.sparqlEndpoint=n,null===e.restEndpoint||""===e.restEndpoint||e.restEndpoint===t?e.restEndpoint=n:e.restEndpoint.replace("data","sparql")===t&&(e.restEndpoint=n.replace("sparql","data")),null===e.sparulEndpoint||""===e.sparulEndpoint||e.sparulEndpoint===t?e.sparulEndpoint=n:e.sparulEndpoint.replace("update","sparql")===t&&(e.sparulEndpoint=n.replace("sparql","update"))),null!=n?rn():void 0}),e.$watch("restEndpoint",function(n,t){if(e.restEndpointInput=n,n!==t){if(a.restEndpoint=n,null===e.sparqlEndpoint||""===e.sparqlEndpoint||e.sparqlEndpoint===t?e.sparqlEndpoint=n:e.sparqlEndpoint.replace("sparql","data")===t&&(e.sparqlEndpoint=n.replace("data","sparql")),null===e.sparulEndpoint||""===e.sparulEndpoint||e.sparulEndpoint===t)return e.sparulEndpoint=n;if(e.sparulEndpoint.replace("update","data")===t)return e.sparulEndpoint=n.replace("data","update")}}),e.$watch("sparulEndpoint",function(n,t){if(e.sparulEndpointInput=n,n!==t){if(a.sparulEndpoint=n,null===e.restEndpoint||""===e.restEndpoint||e.restEndpoint===t?e.restEndpoint=n:e.restEndpoint.replace("data","update")===t&&(e.restEndpoint=n.replace("update","data")),null===e.sparqlEndpoint||""===e.sparqlEndpoint||e.sparqlEndpoint===t)return e.sparqlEndpoint=n;if(e.sparqlEndpoint.replace("sparql","update")===t)return e.sparqlEndpoint=n.replace("update","sparql")}}),e.$watch("data",function(e,n){return e!==n?(a.data=e,c()):void 0}),Q=function(n){var t,r;return e.errorSource=n.config.url,e.errorStatus=n.status+(n.statusText?" ("+n.statusText+")":""),e.errorRequest=null!=(t=n.config.data)?t:null!=(r=n.config.params)?r.query:void 0,e.errorMessage=n.data,e.showError=!0},f=null,rn=function(){return null!=f&&f.resolve(),f=i.defer(),l.query(e.sparqlEndpoint,"SELECT ?graphIRI (COUNT(*) AS ?triples) {\n  {\n	GRAPH ?graphIRI { ?s ?p ?o }\n  } UNION {\n	?s ?p ?o\n  }\n}\nGROUP BY ?graphIRI",{timeout:f.promise}).then(function(n){return e.graphs=n.data.results.bindings},Q)},C=function(e){var n,t;for(t=0,n=0;-1!==t&&"@"===e.charAt(t)&&"p"===e.charAt(t+1)&&"r"===e.charAt(t+2)&&"e"===e.charAt(t+3)&&"f"===e.charAt(t+4)&&"i"===e.charAt(t+5)&&"x"===e.charAt(t+6);)n++,t=e.indexOf("\n",t);return n},u=function(n,t){return g.replaceRange("@prefix "+n+": <"+t+"> .\n",{line:C(e.data),ch:0})},Y=new RegExp("^\\s*@prefix\\s+([^:]+):\\s*<(.+)>","i"),x=function(e){var n,t,r,a,o;for(r="",t=e.split("\n"),a=0,o=t.length;o>a;a++)n=t[a],null!=n.match(Y)&&(r+=n+"\n");return r},A=function(e){var n,t,r,a,o,i;for(a={},t=e.split("\n"),o=0,i=t.length;i>o;o++)n=t[o],r=n.match(Y),null!=r&&(a[r[1]]=r[2]);return a},c=function(){var n,t,r,a;return r=g.getCursor(),"operator"===g.getTokenTypeAt(r)&&(a=g.getTokenAt({line:r.line,ch:r.ch-1}),"variable-3"===a.type&&(n=A(e.data),null==n[a.string]&&(t=o.getNs(a.string,!0),null!=t)))?u(a.string,t):void 0},d=function(n,t,r){var a,i;return i=o.shortForm(r.text,!0),a=A(e.data),n.replaceRange(i.shortForm,t.from,t.to,"complete"),null==a[i.prefix]?u(i.prefix,i.ns):void 0},k=function(e,n){var t,r,a,i;switch(i=e.getTokenAt(n),i.type){case"string":case"keyword":case"variable-2":r=e.getTokenAt({line:n.line,ch:i.start-2}),t="<"+o.expand(r.string+":"+i.string)+">",a=r.start;break;case"string-2":t=i.string;break;case"atom":t=i.string,a=i.start}return{cur:{line:n.line,ch:a},token:i,node:t}},v=function(e,n){var t;return t=k(e,n),"string-2"===t.token.type?null:t},L=function(e){return v(e,e.getCursor())},O=function(e,n){var t;if(-1===n.ch){if(0===n.line)return;n.line--,n.ch=e.getLine(n.line).length}for(t=e.getTokenAt(n);"string"!==t.type&&"keyword"!==t.type&&"variable-2"!==t.type&&"string-2"!==t.type;){if(n.ch=t.start-1,-1===n.ch){if(0===n.line)return;n.line--,n.ch=e.getLine(n.line).length}if(t=e.getTokenAt(n),"punctuation"===t.type)return}return{token:t,pos:n}},P=function(e,n){var t;if(t=e.getTokenAt(n),t.end===n.ch-1){if(n.ch=0,n.line++,n.line>e.lastLine())return;t=e.getTokenAt(n)}for(;"string"!==t.type&&"keyword"!==t.type&&"variable-2"!==t.type&&"string-2"!==t.type;){if(n.ch=t.end+1,t=e.getTokenAt(n),"punctuation"===t.type)return;if(t.end===n.ch-1){if(n.ch=0,n.line++,n.line>e.lastLine())return;t=e.getTokenAt(n)}}return{token:t,pos:n}},p=function(t,r){var a,i,s,u,c,p,f,g,h,I,E,b;if(a=t.getCursor(),E=t.getTokenAt(a),"string"===E.type||"keyword"===E.type||"variable-2"===E.type?":"===t.getTokenAt({line:a.line,ch:E.start}).string&&(c=t.getTokenAt({line:a.line,ch:E.start-2})):"variable-3"===E.type&&(c=E,E=t.getTokenAt({line:a.line,ch:c.end+2})),null!=c)return i=E.end,b="keyword"===E.type?"property":"class",n.get("http://lov.okfn.org/dataset/lov/api/v2/autocomplete/terms",{params:{q:c.string+":"+E.string,type:b}}).then(function(n){var s,u,p,f,g,h,I,b,m,R;if(0!==n.data.total_results)return I=function(){var e,t,r,a;for(r=n.data.results,a=[],e=0,t=r.length;t>e;e++)h=r[e],a.push(h.prefixedName);return a}(),r({list:I,from:CodeMirror.Pos(a.line,c.start),to:CodeMirror.Pos(a.line,i)});switch(b=p=s=m=null,o.setPrefixNsMap(A(e.data)),f=o.expand(c.string+":"+E.string),E.type){case"variable-2":g=nn.getValue(),R=P(t,{line:a.line,ch:E.end+1}),null!=R&&(p=v(t,R.pos).node,R=P(t,{line:R.pos.line,ch:R.token.end+1}),null!=R&&(s=k(t,R.pos).node));break;case"keyword":g=$.getValue(),R=O(t,{line:a.line,ch:E.start-1}),null!=R&&(b=v(t,R.pos).node),R=P(t,{line:a.line,ch:E.end+1}),null!=R&&(s=k(t,R.pos).node);break;case"string":g=F.getValue(),R=O(t,{line:a.line,ch:E.start-1}),null!=R&&(p=k(t,R.pos).node);break;default:g=null}return null!=g?(u=g.split(/#\/?SUBJECTLIMIT/),3===u.length&&(g=b?u[0]+u[1].replace("<SUBJECT>",b)+u[2]:u[0]+u[2]),u=g.split(/#\/?SUBJECTCLASSLIMIT/),3===u.length&&(g=m?u[0]+u[1].replace("<SUBJECTCLASSES>",m.join(" "))+u[2]:u[0]+u[2]),u=g.split(/#\/?PROPERTYLIMIT/),3===u.length&&(g=p?u[0]+u[1].replace("<PROPERTY>",p)+u[2]:u[0]+u[2]),u=g.split(/#\/?OBJECTLIMIT/),3===u.length&&(g=s?u[0]+u[1].replace("<OBJECT>",s)+u[2]:u[0]+u[2]),l.query(e.sparqlEndpoint,W(g,"<QUERY>",f)).then(function(e){var n,t;return t=function(){var t,r,a,i;for(a=e.data.results.bindings,i=[],t=0,r=a.length;r>t;t++)n=a[t],i.push({text:n.iri.value,displayText:o.shortForm(n.iri.value).shortForm,hint:d});return i}(),r({list:t,from:CodeMirror.Pos(a.line,c.start),to:CodeMirror.Pos(a.line,i)})},Q)):void 0},Q);switch(g=p=s=h=null,E.type){case"variable-2":f=tn.getValue(),I=P(t,{line:a.line,ch:E.end+1}),null!=I&&(p=v(t,I.pos).node,I=P(t,{line:I.pos.line,ch:I.token.end+1}),null!=I&&(s=k(t,I.pos).node));break;case"keyword":f=G.getValue(),I=O(t,{line:a.line,ch:E.start-1}),null!=I&&(g=v(t,I.pos).node),I=P(t,{line:a.line,ch:E.end+1}),null!=I&&(s=k(t,I.pos).node);break;case"string":f=B.getValue(),I=O(t,{line:a.line,ch:E.start-1}),null!=I&&(p=k(t,I.pos).node);break;default:f=null}return null!=f?(u=f.split(/#\/?SUBJECTLIMIT/),3===u.length&&(f=g?u[0]+u[1].replace("<SUBJECT>",g)+u[2]:u[0]+u[2]),u=f.split(/#\/?SUBJECTCLASSLIMIT/),3===u.length&&(f=h?u[0]+u[1].replace("<SUBJECTCLASSES>",h.join(" "))+u[2]:u[0]+u[2]),u=f.split(/#\/?PROPERTYLIMIT/),3===u.length&&(f=p?u[0]+u[1].replace("<PROPERTY>",p)+u[2]:u[0]+u[2]),u=f.split(/#\/?OBJECTLIMIT/),3===u.length&&(f=s?u[0]+u[1].replace("<OBJECT>",s)+u[2]:u[0]+u[2]),l.query(e.sparqlEndpoint,W(f,"<QUERY>",E.string)).then(function(e){var n,t;return t=function(){var t,r,a,o;for(a=e.data.results.bindings,o=[],t=0,r=a.length;r>t;t++)n=a[t],o.push({text:n.iri.value,displayText:n.label.value,hint:d});return o}(),r({list:t,from:CodeMirror.Pos(a.line,E.start),to:CodeMirror.Pos(a.line,i)})},Q)):void 0},p.async=!0,CodeMirror.registerHelper("wordChars","turtle",/[-\\w:<>\\#\\/\\.]/),g={},I=function(n){var t;return t=L(n),null!=t.node?(o.setPrefixNsMap(A(e.data)),l.query(e.sparqlEndpoint,W(j.getValue(),"<IRI>",t.node)).then(function(e){return e.data.results.bindings.length>0?n.markText({line:t.cur.line,ch:t.token.start},{line:t.cur.line,ch:t.token.end},{title:e.data.results.bindings[0].label.value}):void 0},function(){})):void 0},e.codemirrorLoaded=function(e){return g=e,g.on("cursorActivity",I)},h=CodeMirror.keyMap["default"]===CodeMirror.keyMap.pcDefault?"Ctrl-":"Cmd-",s=CodeMirror.keyMap["default"]===CodeMirror.keyMap.pcDefault?"Alt-":"Option-",e.commands=[],e.commands.push({key:"Ctrl-Space",command:"Autocomplete"}),e.commands.push({key:h+"F",command:"Find"}),e.commands.push({key:h+"G",command:"Find next"}),e.commands.push({key:h+"Shift-G",command:"Find previous"}),e.commands.push({key:h+("Option-"===s?s:"Shift")+"-F",command:"Replace"}),e.commands.push({key:h+("Option-"===s?s+"Shift-F":"Shift-R"),command:"Replace all"}),e.commands.push({key:h+"J",command:"Toggle code folding"}),e.commands.push({key:h+"K",command:"Fold all"}),e.commands.push({key:h+"L",command:"Load IRI from endpoint"}),e.commands.push({key:h+s+"L",command:"Load IRI direct"}),e.commands.push({key:h+"Enter",command:"Replace editor contents with IRI from endpoint"}),e.commands.push({key:h+s+"Enter",command:"Replace editor contents with IRI direct"}),e.commands.push({key:h+"S",command:"Save current subject/selection to endpoint"}),e.commands.push({key:h+s+"S",command:"Replace current subject/selection at endpoint"}),e.commands.push({key:h+s+"Backspace",command:"Delete current subject/selection at endpoint"}),e.commands.push({key:h+s+"O",command:"Toggle fullscreen mode"}),T={},T["Ctrl-Space"]="autocomplete",T[h+"J"]=function(e){return e.foldCode(e.getCursor())},w=!1,T[h+"K"]=function(e){return w?CodeMirror.commands.unfoldAll(e):CodeMirror.commands.foldAll(e),w=!w},T[h+"S"]=function(e){return _(e)},T[h+"Alt-S"]=function(e){return H(e)},T[h+"Alt-Backspace"]=function(e){return E(e)},T[h+"L"]=function(e){return M(e)},T[h+"Alt-L"]=function(e){return N(e)},T[h+"Enter"]=function(e){return M(e,!0)},T[h+"Alt-Enter"]=function(e){return N(e,!0)},T[h+"Alt-O"]=function(e){return e.setOption("fullScreen",!e.getOption("fullScreen"))},T.ESC=function(e){return e.getOption("fullScreen")?e.setoption("fullScreen",!1):void 0},e.editorOptions={lineWrapping:!0,lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,showTrailingSpace:!0,styleActiveLine:!0,syntaxErrorCheck:!0,hintOptions:{hint:p},highlightSelectionMatches:{showToken:/\w/},foldGutter:{rangeFinder:CodeMirror.fold.indent},gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],extraKeys:T},D=function(e){var n,t,r,a,i,l;for(t=e.match(q),r="",i=0,l=t.length;l>i;i++)n=t[i],o.getPrefix(n.substring(1,n.length-1))||(a=o.shortForm(n,!0),a.newPrefix&&(r+="@prefix "+a.prefix+": <"+a.ns+"> .\n"),e=W(e,n,a.shortForm));return{newPrefixes:r,data:e}},X=function(e){return e.replace(on,"    ").replace(ln,"  ")},J=function(e){var n,t,r,a,i,l,s,u,c,d,p;for(l="",r=e.split("\n"),i="",u={},d=0,p=r.length;p>d;d++)t=r[d],a=t.match(Y),null!=a?(n=o.getPrefix(a[2]),null==n?(o.setPrefixNs(a[1],a),l+=t+"\n"):n!==a[1]&&(u[a[1]]=n)):i+=t+"\n";for(s in u)n=u[s],i=i.replace(new RegExp("(?:^|s)"+(R(s)+":"),"g"),"$1"+n+":");return c=D(X(i)),c.newPrefixes+=l,c},y=new RegExp("[-/\\^$*+?.()|[]{}]","g"),R=function(e){return e.replace(y,"\\$&")},W=function(e,n,t){return e.replace(new RegExp(R(n),"g"),t)},S=function(e){var n,t,r,a,o,i;if(e.getSelection())r=e.getCursor("from"),a=e.getCursor("to"),(a.line<r.line||a.line===r.line&&a.ch<r.ch)&&(i=[a,r],r=i[0],a=i[1]);else{for(r=e.getCursor(),0===r.ch&&(r.ch=1),o=e.getTokenAt(r),"variable-3"===o.type?(r.ch=o.end+2,o=e.getTokenAt(r)):"operator"===o.type&&":"===o.string&&(r.ch+=1,o=e.getTokenAt(r));"atom"!==o.type&&"variable-2"!==o.type||"property"!==o.state.curPos;){if(r.ch=o.start-1,-1===r.ch){if(0===r.line)return;r.line--,r.ch=e.getLine(r.line).length}o=e.getTokenAt(r)}for(r=k(e,r).cur,a={line:r.line,ch:r.ch};"punctuation"!==o.type||"."!==o.string;)if(a.ch=o.end+1,o=e.getTokenAt(a),o.end===a.ch-1){if(a.ch=0,a.line++,a.line>e.lastLine())return;o=e.getTokenAt(a)}}for(t=[],n=e.getRange(r,a);r.line<a.line||r.line===a.line&&r.ch<a.ch;)o=e.getTokenAt(r),o.end===r.ch-1&&(r.ch=0,r.line++,o=e.getTokenAt(r)),"atom"!==o.type&&"variable-2"!==o.type||"property"!==o.state.curPos||t.push(v(e,r).node),r.ch=o.end+1;return{iris:t,data:n}},E=function(n){var r,a;return r=S(n),r?(a=W(W(b.getValue(),"<IRIS>",r.iris.join(" ")),"<GRAPHIRI>",e.graphIRI),l.update(e.sparulEndpoint,a).then(function(){return rn(),t.success("Successfully deleted "+r.iris.join(", ")+" in "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" at endpoint "+e.restEndpoint+" .")},Q)):t.error("Couldn't find subject IRI(s)")},H=function(n){var r,a;return r=S(n),r?(a=W(W(b.getValue(),"<IRIS>",r.iris.join(" ")),"<GRAPHIRI>",e.graphIRI),l.update(e.sparulEndpoint,a).then(function(){return l.post(e.restEndpoint,x(e.data)+r.data,e.graphIRI).then(function(){return rn(),t.success("Successfully replaced "+r.iris.join(", ")+" in "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" at endpoint "+e.restEndpoint+" .")},Q)},Q)):t.error("Couldn't find subject IRI(s)")},_=function(n){var r,a;return n.getSelection()?(r=n.getSelection(),an="selection"):(a=S(n),r=a.data,an=a.iris[0]),r?l.post(e.restEndpoint,x(e.data)+r,e.graphIRI).then(function(){return rn(),t.success("Successfully inserted "+an+" into "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" at endpoint "+e.restEndpoint+" .")},Q):t.error("No data to save")},M=function(n,r){var a;return a=L(n),null!=a.node?l.construct(e.sparqlEndpoint,W(m.getValue(),"<IRI>",a.node)).then(function(i){var l,s;return t.success("Successfully loaded "+a.node+" from "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" at endpoint "+e.restEndpoint+" ."),null!=r?(o.setPrefixNsMap(A(i.data)),l=D(X(i.data)),e.data=l.newPrefixes+l.data):(o.setPrefixNsMap(A(e.data)),s=J(i.data),n.replaceRange(s.newPrefixes,{line:C(e.data),ch:0}),n.replaceRange(s.data,{line:n.lastLine()+1,ch:0}))},Q):t.error("No IRI under cursor")},N=function(r,a){var i;return i=L(r),null!=i.node?n.get(i.node.substring(1,i.node.length-1),{headers:{Accept:"text/turtle"}}).then(function(n){var l,s;return t.success("Successfully loaded "+i.node+"."),null!=a?(o.setPrefixNsMap(A(n.data)),l=D(X(n.data)),e.data=l.newPrefixes+l.data):(o.setPrefixNsMap(A(e.data)),s=J(n.data),r.replaceRange(s.newPrefixes,{line:C(e.data),ch:0}),r.replaceRange(s.data,{line:r.lastLine()+1,ch:0}))},Q):t.error("No IRI under cursor")},q=new RegExp("<.*?>","g"),on=new RegExp("        ","g"),ln=new RegExp("    ","g"),e.loadGraph=function(){return e.loading?void 0:(e.loading=!0,l.get(e.restEndpoint,e.graphIRI).then(function(n){var r;return e.loading=!1,o.setPrefixNsMap(A(n.data)),r=D(X(n.data)),e.data=r.newPrefixes+r.data,t.success("Successfully loaded "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" from endpoint "+e.restEndpoint+" .")},function(n){return e.loading=!1,Q(n)}))},e.postGraph=function(){return e.inserting?void 0:(e.inserting=!0,l.post(e.restEndpoint,e.data,e.graphIRI).then(function(){return e.inserting=!1,rn(),t.success("Successfully inserted data into "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" at endpoint "+e.restEndpoint+" .")},function(n){return e.inserting=!1,Q(n)}))},e.putGraph=function(){return e.replacing?void 0:(e.replacing=!0,l.put(e.restEndpoint,e.data,e.graphIRI).then(function(){return e.replacing=!1,rn(),t.success("Successfully replaced "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" at endpoint "+e.restEndpoint+" .")},function(n){return e.replacing=!1,Q(n)}))},U={describeQuery:"CONSTRUCT { <IRI> ?p ?o } WHERE { <IRI> ?p ?o }",deleteResourceQuery:"DELETE { ?s ?p ?o } WHERE { \n	VALUES ?s { <IRIS> }\n	?s ?p ?o .\n}",labelQuery:"PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT ?label {\n	<IRI> rdfs:label|skos:prefLabel|skos:altLabel ?label .\n}\nLIMIT 1",subjectLabelQuery:'PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri ?label {\n	?iri rdfs:label|skos:prefLabel|skos:altLabel ?label .\n	FILTER(STRSTARTS(LCASE(?label),LCASE("<QUERY>")))\n}\nORDER BY ?label',subjectIRIQuery:'PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri {\n	{ ?iri ?p ?o }\n	UNION\n	{ ?s ?iri ?o }\n	UNION\n	{ ?s ?p ?iri }\n	FILTER(STRSTARTS(LCASE(STR(?iri)),LCASE("<QUERY>")))\n}\nORDER BY ?iri',propertyLabelQuery:'PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nSELECT DISTINCT ?iri ?label {\n	?iri rdfs:label|skos:prefLabel|skos:altLabel ?label .\n	FILTER(STRSTARTS(LCASE(?label),LCASE("<QUERY>")))\n	{\n		?iri a rdf:Property .\n	} UNION {\n		?iri a owl:DatatypeProperty .\n	} UNION {\n		?iri a owl:ObjectProperty .\n	} UNION {\n		?s ?iri ?o .\n	}\n}\nORDER BY ?label',propertyIRIQuery:'PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nSELECT DISTINCT ?iri {\n	{\n		?iri a rdf:Property .\n	} UNION {\n		?iri a owl:DatatypeProperty .\n	} UNION {\n		?iri a owl:ObjectProperty .\n	} UNION {\n		?s ?iri ?o .\n	}\n	FILTER(STRSTARTS(LCASE(STR(?iri)),LCASE("<QUERY>")))\n}\nORDER BY ?iri',objectLabelQuery:'PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri ?label {\n	?iri rdfs:label|skos:prefLabel|skos:altLabel ?label .\n	FILTER(STRSTARTS(LCASE(?label),LCASE("<QUERY>")))\n}\nORDER BY ?label',objectIRIQuery:'PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri {\n	{ ?iri ?p ?o }\n	UNION\n	{ ?s ?iri ?o }\n	UNION\n	{ ?s ?p ?iri }\n	FILTER(STRSTARTS(LCASE(STR(?iri)),LCASE("<QUERY>")))\n}\nORDER BY ?iri'},en={describeQuery:"CONSTRUCT { <IRI> ?p ?o } WHERE { <IRI> ?p ?o }",deleteResourceQuery:"DELETE { ?s ?p ?o } WHERE { \n	VALUES ?s { <IRIS> }\n	?s ?p ?o .\n}",labelQuery:"PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT ?label {\n	<IRI> rdfs:label|skos:prefLabel|skos:altLabel ?label .\n}\nLIMIT 1",subjectLabelQuery:'PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri ?label {\n	#PROPERTYLIMIT\n		<PROPERTY> rdfs:domain ?domain .\n		?iri a/rdfs:subClassOf* ?domain .\n	#/PROPERTYLIMIT\n	#OBJECTLIMIT\n		<OBJECT> a ?objectClass .\n		?property rdfs:range ?objectClass .\n	#/OBJECTLIMIT\n	?iri rdfs:label|skos:prefLabel|skos:altLabel ?label .\n	FILTER(STRSTARTS(LCASE(?label),LCASE("<QUERY>")))\n}\nORDER BY ?label',subjectIRIQuery:'PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri {\n	#PROPERTYLIMIT\n		<PROPERTY> rdfs:domain ?domain .\n		?iri a/rdfs:subClassOf* ?domain .\n	#/PROPERTYLIMIT\n	#OBJECTLIMIT\n		<OBJECT> a ?objectClass .\n		?property rdfs:range ?objectClass .\n	#/OBJECTLIMIT\n	{ ?iri ?p ?o }\n	UNION\n	{ ?s ?iri ?o }\n	UNION\n	{ ?s ?p ?iri }\n	FILTER(STRSTARTS(LCASE(STR(?iri)),LCASE("<QUERY>")))\n}\nORDER BY ?iri',propertyLabelQuery:'PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nSELECT DISTINCT ?iri ?label {\n	#SUBJECTLIMIT\n		<SUBJECT> a ?subjectClass .\n		?iri rdfs:domain ?subjectClass .\n	#/SUBJECTLIMIT\n	#SUBJECTCLASSLIMIT\n		VALUES ?subjectClass {\n			<SUBJECTCLASSES>\n		}\n		?iri rdfs:domain ?subjectClass .\n	#/SUBJECTCLASSLIMIT\n	#OBJECTLIMIT\n		<OBJECT> a ?objectClass .\n		?iri rdfs:range ?objectClass .\n	#/OBJECTLIMIT\n	?iri rdfs:label|skos:prefLabel|skos:altLabel ?label .\n	FILTER(STRSTARTS(LCASE(?label),LCASE("<QUERY>")))\n	{\n		?iri a rdf:Property .\n	} UNION {\n		?iri a owl:DatatypeProperty .\n	} UNION {\n		?iri a owl:ObjectProperty .\n	} UNION {\n		?s ?iri ?o .\n	}\n}\nORDER BY ?label',propertyIRIQuery:'PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nSELECT DISTINCT ?iri {\n	#SUBJECTLIMIT\n		<SUBJECT> a ?subjectClass .\n		?iri rdfs:domain ?subjectClass .\n	#/SUBJECTLIMIT\n	#SUBJECTCLASSLIMIT\n		VALUES ?subjectClass {\n			<SUBJECTCLASSES>\n		}\n		?iri rdfs:domain ?subjectClass .\n	#/SUBJECTCLASSLIMIT\n	#OBJECTLIMIT\n		<OBJECT> a ?objectClass .\n		?iri rdfs:range ?objectClass .\n	#/OBJECTLIMIT\n	{\n		?iri a rdf:Property .\n	} UNION {\n		?iri a owl:DatatypeProperty .\n	} UNION {\n		?iri a owl:ObjectProperty .\n	} UNION {\n		?s ?iri ?o .\n	}\n	FILTER(STRSTARTS(LCASE(STR(?iri)),LCASE("<QUERY>")))\n}\nORDER BY ?iri',objectLabelQuery:'PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri ?label {\n	#PROPERTYLIMIT\n		<PROPERTY> rdfs:range ?domain .\n		?iri a/rdfs:subClassOf* ?domain .\n	#/PROPERTYLIMIT\n	?iri rdfs:label|skos:prefLabel|skos:altLabel ?label .\n	FILTER(STRSTARTS(LCASE(?label),LCASE("<QUERY>")))\n}\nORDER BY ?label',objectIRIQuery:'PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri {\n	#PROPERTYLIMIT\n		<PROPERTY> rdfs:range ?domain .\n		?iri a/rdfs:subClassOf* ?domain .\n	#/PROPERTYLIMIT\n	{ ?iri ?p ?o }\n	UNION\n	{ ?s ?iri ?o }\n	UNION\n	{ ?s ?p ?iri }\n	FILTER(STRSTARTS(LCASE(STR(?iri)),LCASE("<QUERY>")))\n}\nORDER BY ?iri'},m=new YASQE(document.getElementById("describeQuery"),{value:U.describeQuery,createShareLink:null}),null!=(null!=(sn=r.config)?sn.describeQuery:void 0)&&m.setValue(r.config.describeQuery),b=new YASQE(document.getElementById("deleteResourceQuery"),{value:U.deleteResourceQuery,createShareLink:null}),j=new YASQE(document.getElementById("labelQuery"),{value:U.labelQuery,createShareLink:null}),null!=(null!=(un=r.config)?un.labelQuery:void 0)&&j.setValue(r.config.labelQuery),tn=new YASQE(document.getElementById("subjectLabelQuery"),{value:U.subjectLabelQuery,createShareLink:null}),null!=(null!=(cn=r.config)?cn.subjectLabelQuery:void 0)&&tn.setValue(r.config.subjectLabelQuery),nn=new YASQE(document.getElementById("subjectIRIQuery"),{value:U.subjectIRIQuery,createShareLink:null}),null!=(null!=(dn=r.config)?dn.subjectIRIQuery:void 0)&&nn.setValue(r.config.subjectIRIQuery),G=new YASQE(document.getElementById("propertyLabelQuery"),{value:U.propertyLabelQuery,createShareLink:null}),null!=(null!=(pn=r.config)?pn.propertyLabelQuery:void 0)&&G.setValue(r.config.propertyLabelQuery),$=new YASQE(document.getElementById("propertyIRIQuery"),{value:U.propertyIRIQuery,createShareLink:null}),null!=(null!=(fn=r.config)?fn.propertyIRIQuery:void 0)&&$.setValue(r.config.propertyIRIQuery),B=new YASQE(document.getElementById("objectLabelQuery"),{value:U.objectLabelQuery,createShareLink:null}),null!=(null!=(gn=r.config)?gn.objectLabelQuery:void 0)&&B.setValue(r.config.objectLabelQuery),F=new YASQE(document.getElementById("objectIRIQuery"),{value:U.objectIRIQuery,createShareLink:null}),null!=(null!=(hn=r.config)?hn.objectIRIQuery:void 0)&&F.setValue(r.config.objectIRIQuery),e.loadLooseDefaults=function(){return m.setValue(U.describeQuery),b.setValue(U.deleteResourceQuery),j.setValue(U.labelQuery),tn.setValue(U.subjectLabelQuery),nn.setValue(U.subjectIRIQuery),G.setValue(U.propertyLabelQuery),$.setValue(U.propertyIRIQuery),B.setValue(U.objectLabelQuery),F.setValue(U.objectIRIQuery)
},e.loadStrictDefaults=function(){return m.setValue(en.describeQuery),b.setValue(en.deleteResourceQuery),j.setValue(en.labelQuery),tn.setValue(en.subjectLabelQuery),nn.setValue(en.subjectIRIQuery),G.setValue(en.propertyLabelQuery),$.setValue(en.propertyIRIQuery),B.setValue(en.objectLabelQuery),F.setValue(en.objectIRIQuery)}}])}.call(this),function(e){try{e=angular.module("fi.seco.aether")}catch(n){e=angular.module("fi.seco.aether",[])}e.run(["$templateCache",function(e){e.put("partials/main.html",'<a href="https://github.com/jiemakel/snapper"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"/></a>\n<div class="ui page grid">\n  <div class="column">\n    <h1 class="ui header center aligned">Snapper Turtle Editor </h1>\n    <div class="ui segment">\n      <div ng-show="showError" ng-click="showError=false" class="ui floating error message fade transition"><i class="close icon"></i>\n        <div class="header">{{errorSource}} returned error {{errorStatus}}:</div>{{errorMessage}}<br/>for request:<br/>{{errorRequest}}\n      </div>\n      <div class="ui form">\n        <div id="commands-container">\n          <div id="commands" style="" ng-mouseenter="showCommands=true" ng-mouseleave="showCommands=false" class="ui segment teal label"><i class="right floating icon info"> Keyboard commands</i>\n            <div ng-show="showCommands" class="ui small bulleted list">\n              <div ng-repeat="command in commands" class="item">{{command.key}}: {{command.command}}</div>\n            </div>\n          </div>\n        </div>\n        <div class="field">\n          <label>Editor</label>\n          <div ui-codemirror="{ onLoad : codemirrorLoaded }" ui-codemirror-opts="editorOptions" ng-model="data">           </div>\n        </div>\n        <div class="field">\n          <label>Graph IRI</label>\n          <input type="text" list="graphIRIs" ng-model="graphIRIInput" style="width:20em"/>\n          <datalist id="graphIRIs">\n            <option ng-repeat="graph in graphs" label="{{graph.triples.value | number}} triples">{{graph.graphIRI.value || \'default\'}}</option>\n          </datalist>\n        </div>\n        <div class="field">\n          <button ng-class="loading ? &quot;loading&quot; : &quot;&quot;" ng-click="loadGraph()" class="ui green button">Load</button>\n          <button ng-class="inserting ? &quot;loading&quot; : &quot;&quot;" ng-click="postGraph()" class="ui orange button">Insert</button>\n          <button ng-class="replacing ? &quot;loading&quot; : &quot;&quot;" ng-click="putGraph()" class="ui red button">Replace</button>\n        </div>\n        <div class="ui three column grid">\n          <div ng-class="{ \'error\': !restEndpointInputValid }" class="field column">\n            <label>SPARQL graph store protocol endpoint</label>\n            <input type="text" ng-model="restEndpointInput" ng-blur="restEndpoint = restEndpointInputValid ? restEndpointInput : restEndpoint"/>\n          </div>\n          <div ng-class="{ \'error\': !sparqlEndpointInputValid }" class="field column">       \n            <label>SPARQL query endpoint</label>\n            <input type="text" ng-model="sparqlEndpointInput" ng-blur="sparqlEndpoint = sparqlEndpointInputValid ? sparqlEndpointInput : sparqlEndpoint"/>\n          </div>\n          <div ng-class="{ \'error\': !sparulEndpointInputValid }" class="field column">       \n            <label>SPARQL update endpoint</label>\n            <input type="text" ng-model="sparulEndpointInput" ng-blur="sparulEndpoint = sparulEndpointInputValid ? sparulEndpointInput : sparulEndpoint"/>\n          </div>\n        </div>\n      </div>\n      <button ng-click="showConfiguration=!showConfiguration" class="tiny ui button">Configure queries</button>\n      <div ng-show="showConfiguration" class="ui segment">\n        <div class="ui header">Configure SPARQL queries</div>\n        <div style="max-height:100%;overflow:scroll;display:block;" class="content">\n          <div class="ui form">\n            <div class="field">\n              <label>Label query</label>\n              <div id="labelQuery"></div>\n            </div>\n            <div class="field">\n              <label>Load resource query</label>\n              <div id="describeQuery"></div>\n            </div>\n            <div class="field">\n              <label>Delete resource(s) query</label>\n              <div id="deleteResourceQuery"></div>\n            </div>\n            <div class="field">\n              <label>Subject label autocompletion query</label>\n              <div id="subjectLabelQuery"></div>\n            </div>\n            <div class="field">\n              <label>Property label autocompletion query</label>\n              <div id="propertyLabelQuery"></div>\n            </div>\n            <div class="field">\n              <label>Object label autocompletion query</label>\n              <div id="objectLabelQuery"></div>\n            </div>\n            <div class="field">\n              <label>Subject IRI autocompletion query</label>\n              <div id="subjectIRIQuery"></div>\n            </div>\n            <div class="field">\n              <label>Property IRI autocompletion query</label>\n              <div id="propertyIRIQuery"></div>\n            </div>\n            <div class="field">\n              <label>Object IRI autocompletion query</label>\n              <div id="objectIRIQuery"></div>\n            </div>\n            <div class="field">\n              <button ng-click="loadLooseDefaults()" class="ui green button">Load loose defaults</button>\n              <button ng-click="loadStrictDefaults()" class="ui orange button">Load strict defaults</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>')}])}();