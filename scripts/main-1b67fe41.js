(function(){"use strict";CodeMirror.defineMode("turtle",function(e){var n,t,r,a,o,i,l,s,u,c,p;return n=function(e){return new RegExp("^(?:"+e.join("|")+")$","i")},t=function(e,n){var t=[];for(e.eatWhile(n);"\\"===e.peek();)e.next(),e.next(),t.push(e.eatWhile(n));return t},r=function(e,n){var r,o,i,l,s,u;return"MLL"===n.curPos?(e.eatWhile(/[^"]/),e.match(/"""/)&&(n.curPos="EOS"),"string-2"):(r=e.next(),o=!1,i=null,l=n.lastWasColon,n.lastWasColon=!1,!l&&("."===r&&e.match(/\d/)||(r>"0"&&"9">r||"-"===r||"+"===r)&&e.match(/[\d.+-eE]*\W/))?(e.eatWhile(/[\d]/),"object"===n.curPos?0===n.inLists&&(n.curPos="EOS"):o=!0,o?"number error":"number"):"<"!==r||e.match(/^[\s\u00a0=]/,!1)?'"'===r||"'"===r?("object"!==n.curPos&&(o=!0),0===n.inLists&&(n.curPos="EOS"),'"'===r&&e.match(/""/)?(n.curPos="MLL",e.eatWhile(/[^"]/),"string-2"):(n.tokenize=a(r),o?n.tokenize(e,n)+" error":n.tokenize(e,n))):/[{}\(\),\.;\[\]]/.test(r)?(i=r,";"===i?("EOS"!==n.curPos&&(o=!0),n.curPos="property"):"."===i?n.curPos="subject":","===i?("EOS"!==n.curPos&&(o=!0),n.curPos="object"):"["===i?("object"!==n.curPos&&(o=!0),n.curPos="property"):"]"===i?n.curPos="EOS":"("===i?n.inLists++:")"===i&&n.inLists--,o?"punctuation error":"punctuation"):"#"===r?(e.skipToEnd(),"comment"):p.test(r)?(e.eatWhile(p),"operator"):":"===r?(n.lastWasColon=!0,"operator"):(l?t(e,/[_\w\d:-]/):e.eatWhile(/[_\w\d\\-]/),":"===e.peek()?"variable-3":(s=e.current(),!l&&c.test(s)?("a"===s&&("property"!==n.curPos&&(o=!0),n.curPos="object"),o?"meta error":"meta"):"@"===r?"variable-2":"^"===r&&"^"===e.peek()?(e.next(),e.eatWhile(/[_\w\d:]/),"qualifier"):(u=void 0,u="subject"===n.curPos?"variable-2":"property"===n.curPos?"keyword":"object"===n.curPos?"string":"error","subject"===n.curPos?n.curPos="property":"property"===n.curPos?n.curPos="object":"object"===n.curPos&&0===n.inLists&&(n.curPos="EOS"),u))):(e.match(/^[^\s\u00a0>]*>?/),"subject"===n.curPos?n.curPos="property":"property"===n.curPos?n.curPos="object":"object"===n.curPos?0===n.inLists&&(n.curPos="EOS"):o=!0,o?"atom error":"atom"))},a=function(e){return function(n,t){var a,o;for(a=!1,o=void 0;null!=(o=n.next());){if(o===e&&!a){t.tokenize=r;break}a=!a&&"\\"===o}return"string-2"}},o=function(e,n,t){e.context={prev:e.context,indent:e.indent,col:t,type:n}},i=function(e){e.indent=e.context.indent,e.context=e.context.prev},l=e.indentUnit,s=void 0,u=n([]),c=n(["@prefix","@base","a"]),p=/[*+\-<>=&|]/,{startState:function(){return{tokenize:r,context:null,curPos:"subject",lastWasColon:!1,inLists:0,indent:0,col:0}},token:function(e,n){var t;if(e.sol()&&(n.context&&null==n.context.align&&(n.context.align=!1),n.indent=e.indentation()),e.eatSpace())return n.lastWasColon&&(n.lastWasColon=!1,"subject"===n.curPos?n.curPos="property":"property"===n.curPos?n.curPos="object":"object"===n.curPos&&0===n.inLists&&(n.curPos="EOS")),null;if(t=n.tokenize(e,n),"string"!==t&&n.context&&null==n.context.align&&"pattern"!==n.context.type&&(n.context.align=!0),"("===s)o(n,")",e.column());else if("["===s)o(n,"]",e.column());else if("{"===s)o(n,"}",e.column());else if(/[\]\}\)]/.test(s)){for(;n.context&&"pattern"===n.context.type;)i(n);n.context&&s===n.context.type&&i(n)}else"."===s&&n.context&&"pattern"===n.context.type?i(n):/atom|string|variable/.test(t)&&n.context&&(/[\}\]]/.test(n.context.type)?o(n,"pattern",e.column()):"pattern"!==n.context.type||n.context.align||(n.context.align=!0,n.context.col=e.column()));return t},fold:"indent",indent:function(e,n){var t,r,a;for(t=n&&n.charAt(0),r=e.context;r&&"pattern"===r.type;)/[\]\}]/.test(t)&&(r=r.prev);return a=r&&t===r.type,r?"pattern"===r.type?r.col:r.align?r.col+(a?0:1):r.indent+(a?0:l):";"===s?0!==e.indent?e.indent:l:0}}}),CodeMirror.defineMIME("text/turtle","turtle")}).call(this),function(){"use strict";angular.module("fi.seco.prefix",[]).factory("prefixService",["$http",function(e){function n(e,n){var t,r;return t=e.lastIndexOf("#",n),r=e.lastIndexOf("/",n),t>r?t:r}var t,r,a,o,i;return t={},r={},a={},o={},i=0,e.get("http://prefix.cc/popular/all.file.json").then(function(e){var n,a,o;for(n in a=e.data)o=a[n],t[o]=n,r[n]=o}),{reset:function(){return i=0,a={},o={}},setPrefixNsMap:function(e){var n,t,r=[];a=e,o={};for(n in a)t=a[n],r.push(o[t]=n);return r},invert:function(e){var n,t,r;n={};for(t in e)r=e[t],n[r]=t;return n},setPrefixNs:function(e,n){return o[n]=e,a[e]=n},expand:function(e){var n,t;return n=e.indexOf(":"),null!=a[e.substring(0,n)]?(t=a[e.substring(0,n)],a[e.substring(0,n)]+e.substring(n+1)):e},getPrefix:function(e,n){var r;return n||o[e],null!=(r=o[e])?r:t[e]},getNs:function(e,n){var t;return n||a[e],null!=(t=a[e])?t:r[e]},unescapeLocalName:function(e){return e.replace(/\\/g,"")},escapeLocalName:function(e){return e.replace(/\\.$/,"\\.").replace(/^([.-])/,"\\$1").replace(/([\\~!$&'()*+,;=\/?#@%])/g,"\\$1")},shortForm:function(e,r,l){var s,u,c,p,d,f,g,h,I,E,b;if(">"===e.charAt(e.length-1)&&-1!==e.indexOf('"^^<'))return s=e.substring(e.indexOf('"^^<')+4,e.length-1),u=this.shortForm(s),{shortForm:e.substring(0,e.indexOf('"^^<')+3)+u.shortForm,ns:u.ns,prefix:u.prefix};if('"'===e.charAt(0))return{shortForm:e};if(s="<"===e.charAt(0)&&">"===e.charAt(e.length-1)?e.substring(1,e.length-1):e,c=n(s,s.length),-1!==c){if(r)for(;c>0;){if(null!=o[s.substring(0,c+1)])return p=o[s.substring(0,c+1)],{shortForm:p+":"+this.escapeLocalName(s.substring(c+1)),ns:s.substring(0,c+1),prefix:p};c=n(s,c-1)}else if(null!=o[s.substring(0,c+1)])return p=o[s.substring(0,c+1)],{shortForm:p+":"+this.escapeLocalName(s.substring(c+1)),ns:s.substring(0,c+1),prefix:p};if(!l)return{shortForm:e};if(c=n(s,s.length),r)for(;c>0;){if(null!=t[s.substring(0,c+1)]){for(d=s.substring(0,c+1),f=t[s.substring(0,c+1)],p=f,g=1;a[p];)p=f+ ++g;return o[d]=p,a[p]=d,{shortForm:p+":"+this.escapeLocalName(s.substring(c+1)),ns:s.substring(0,c+1),prefix:p,newPrefix:!0}}c=n(s,c-1)}else if(null!=t[s.substring(0,c+1)]){for(d=s.substring(0,c+1),f=t[s.substring(0,c+1)],p=f,g=1;a[p];)p=f+ ++g;return o[d]=p,a[p]=d,{shortForm:p+":"+this.escapeLocalName(s.substring(c+1)),ns:s.substring(0,c+1),prefix:p,newPrefix:!0}}if(c=n(s,s.length),h=n(s,c-1),-1!==h&&(s.charAt(h+1)<"0"||s.charAt(h+1)>"9"))for(I=s.substring(h+1,c),E=I,g=1;a[E];)E=I+ ++g;else E="ns"+ ++i;return b=s.substring(0,c+1),o[b]=E,a[E]=b,{shortForm:E+":"+this.escapeLocalName(s.substring(c+1)),ns:b,prefix:E,newPrefix:!0}}return{shortForm:e}}}}])}.call(this),function(){"use strict";angular.module("fi.seco.sparql",[]).factory("sparql",["$http","$q",function(e,n){var t;return t={check:function(t,r){var a;return a=n.defer(),e(angular.extend({method:"GET",url:t,params:{query:"ASK {}"},headers:{Accept:"application/sparql-results+json"}},r)).then(function(e){return a.resolve(null!=e.data.boolean)},function(e){return a.reject(e)}),a.promise},checkUpdate:function(t,r){var a;return a=n.defer(),e(angular.extend({method:"POST",url:t,headers:{"Content-Type":"application/sparql-update"},data:"INSERT DATA {}"},r)).then(function(e){return a.resolve(204===e.status)},function(e){return a.reject(e)}),a.promise},checkRest:function(t,r){var a;return a=n.defer(),e(angular.extend({method:"POST",url:t+"?default",data:"",headers:{"Content-Type":"text/turtle"}},r)).then(function(e){return a.resolve(204===e.status)},function(e){return a.reject(e)}),a.promise},get:function(n,t,r){return e(angular.extend({method:"GET",url:n,params:null!=t?{graph:t}:{"default":""},headers:{Accept:"text/turtle"}},r))},post:function(n,t,r,a){return e(angular.extend({method:"POST",url:n,params:null!=r?{graph:r}:{"default":""},data:t,headers:{"Content-Type":"text/turtle"}},a))},put:function(n,t,r,a){return e(angular.extend({method:"PUT",url:n,params:null!=r?{graph:r}:{"default":""},data:t,headers:{"Content-Type":"text/turtle"}},a))},"delete":function(n,t,r){return e(angular.extend({method:"DELETE",url:n,params:null!=t?{graph:t}:{"default":""}},r))},construct:function(n,t,r){return e(t.length<=2048?angular.extend({method:"GET",url:n,params:{query:t},headers:{Accept:"text/turtle"}},r):angular.extend({method:"POST",url:n,data:t,headers:{"Content-Type":"application/sparql-query",Accept:"text/turtle"}},r))},query:function(n,t,r){return e(t.length<=2048?angular.extend({method:"GET",url:n,params:{query:t},headers:{Accept:"application/sparql-results+json"}},r):angular.extend({method:"POST",url:n,data:t,headers:{"Content-Type":"application/sparql-query",Accept:"application/sparql-results+json"}},r))},update:function(n,t,r){return e(angular.extend({method:"POST",url:n,headers:{"Content-Type":"application/sparql-update"},data:t},r))},bindingToString:function(e){var n;if(null==e)return"UNDEF";if(n=e.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\'/g,"\\'").replace(/\"/g,'\\"'),"uri"===e.type)return"<"+n+">";if("bnode"===e.type)return"_:"+n;if(null==e.datatype)return e["xml:lang"]?'"'+n+'"@'+e["xml:lang"]:'"'+n+'"';switch(e.datatype){case"http://www.w3.org/2001/XMLSchema#integer":case"http://www.w3.org/2001/XMLSchema#decimal":case"http://www.w3.org/2001/XMLSchema#double":case"http://www.w3.org/2001/XMLSchema#boolean":return n;case"http://www.w3.org/2001/XMLSchema#string":return'"'+n+'"';default:return'"'+n+'"^^<'+e.datatype+">"}}}}])}.call(this),function(){angular.module("app",["http-auth-interceptor","toastr","ngAnimate","ngStorage","ui.router","ui.codemirror","fi.seco.prefix","fi.seco.sparql"]).run(["$rootScope","$http","authService",function(e,n,t){return e.setAuth=function(){return e.authOpen=!1,n.defaults.headers.common.Authorization="Basic "+btoa(e.username+":"+e.password),t.loginConfirmed()},e.dismissAuth=function(){return e.authOpen=!1,t.loginCancelled({status:401},"Authentication required")},e.$on("event:auth-loginRequired",function(){return e.authOpen=!0})}]).config(["$stateProvider","$urlRouterProvider",function(e,n){return e.state("home",{url:"/?data&restEndpoint&sparqlEndpoint&graphIRI&configuration",templateUrl:"partials/main.html",controller:"MainCtrl"}),n.otherwise("/")}]).config(["toastrConfig",function(e){return angular.extend(e,{allowHtml:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",positionClass:"toast-top-full-width",tapToDismiss:!0,timeOut:1500,titleClass:"toast-title",toastClass:"toast"})}])}.call(this),function(){angular.module("app").controller("MainCtrl",["$scope","$http","toastr","$stateParams","$localStorage","prefixService","$q","sparql",function(e,n,t,r,a,o,i,l){function s(n){var t;e.errorSource=n.config.url,e.errorStatus=n.status+(n.statusText?" ("+n.statusText+")":""),e.errorRequest=null!=(t=n.config.data)?t:null!=(t=n.config.params)?t.query:void 0,e.errorMessage=n.data,e.showError=!0}function u(){null!=U&&U.resolve(),U=i.defer(),l.query(e.sparqlEndpoint,"SELECT ?graphIRI (COUNT(*) AS ?triples) {\n  {\n	GRAPH ?graphIRI { ?s ?p ?o }\n  } UNION {\n	?s ?p ?o\n  }\n}\nGROUP BY ?graphIRI",{timeout:U.promise}).then(function(n){e.graphs=n.data.results.bindings},s)}function c(e){var n,t;for(n=0,t=0;-1!==n&&"@"===e.charAt(n)&&"p"===e.charAt(n+1)&&"r"===e.charAt(n+2)&&"e"===e.charAt(n+3)&&"f"===e.charAt(n+4)&&"i"===e.charAt(n+5)&&"x"===e.charAt(n+6);)t++,n=e.indexOf("\n",n);return t}function p(n,t,r){n.replaceRange("@prefix "+t+": <"+r+"> .\n",{line:c(e.data),ch:0})}function d(e){var n,t,r,a,o;for(n="",t=e.split("\n"),r=0,a=t.length;a>r;++r)o=t[r],null!=o.match(B)&&(n+=o+"\n");return n}function f(e){var n,t,r,a,o,i;for(n={},t=e.split("\n"),r=0,a=t.length;a>r;++r)o=t[r],i=o.match(B),null!=i&&(n[i[1]]=i[2]);return n}function g(n){var t,r,a,i;t=n.getCursor(),"operator"===n.getTokenTypeAt(t)&&(r=n.getTokenAt({line:t.line,ch:t.ch-1}),"variable-3"===r.type&&(a=f(e.data),null==a[r.string]&&(i=o.getNs(r.string,!0),null!=i&&p(n,r.string,i))))}function h(n,t,r){var a,i;a=o.shortForm(r.text,!1,!0),i=f(e.data),n.replaceRange(a.shortForm,t.from,t.to,"complete"),null==i[a.prefix]&&p(n,a.prefix,a.ns)}function I(e,n){var t,r,a,i;switch(t=e.getTokenAt(n),t.type){case"string":case"keyword":case"variable-2":r=e.getTokenAt({line:n.line,ch:t.start-2}),a="<"+o.expand(r.string+":"+t.string)+">",i=r.start;break;case"string-2":a=t.string;break;case"atom":a=t.string,i=t.start}return{cur:{line:n.line,ch:i},token:t,node:a}}function E(e,n){var t;return t=I(e,n),"string-2"===t.token.type?null:t}function b(e){return E(e,e.getCursor())}function m(e,n){var t;if(-1===n.ch){if(0===n.line)return;n.line--,n.ch=e.getLine(n.line).length}for(t=e.getTokenAt(n);"string"!==t.type&&"keyword"!==t.type&&"variable-2"!==t.type&&"string-2"!==t.type;){if(n.ch=t.start-1,-1===n.ch){if(0===n.line)return;n.line--,n.ch=e.getLine(n.line).length}if(t=e.getTokenAt(n),"punctuation"===t.type)return}return{token:t,pos:n}}function R(e,n){var t;if(t=e.getTokenAt(n),t.end===n.ch-1){if(n.ch=0,n.line++,n.line>e.lastLine())return;t=e.getTokenAt(n)}for(;"string"!==t.type&&"keyword"!==t.type&&"variable-2"!==t.type&&"string-2"!==t.type;){if(n.ch=t.end+1,t=e.getTokenAt(n),"punctuation"===t.type)return;if(t.end===n.ch-1){if(n.ch=0,n.line++,n.line>e.lastLine())return;t=e.getTokenAt(n)}}return{token:t,pos:n}}function y(t,r){var a,i,u,c,p,d,g,b,y,T,w,S;if(a=t.getCursor(),i=t.getTokenAt(a),"string"===i.type||"keyword"===i.type||"variable-2"===i.type?":"===t.getTokenAt({line:a.line,ch:i.start}).string&&(u=t.getTokenAt({line:a.line,ch:i.start-2})):"variable-3"===i.type&&(u=i,i=t.getTokenAt({line:a.line,ch:u.end+2})),null!=u)c=i.end,p="keyword"===i.type?"property":"class",n.get("http://lov.okfn.org/dataset/lov/api/v2/autocomplete/terms",{params:{q:u.string+":"+i.string,type:p}}).then(function(n){var p,d,g,b,y,T,w,S,v,L,P,k,x,A;if(0===n.data.total_results){switch(p=d=g=b=null,o.setPrefixNsMap(f(e.data)),y=o.expand(u.string+":"+i.string),i.type){case"variable-2":T=rn.getValue(),w=R(t,{line:a.line,ch:i.end+1}),null!=w&&(d=E(t,w.pos).node,w=R(t,{line:w.pos.line,ch:w.token.end+1}),null!=w&&(g=I(t,w.pos).node));break;case"keyword":T=on.getValue(),w=m(t,{line:a.line,ch:i.start-1}),null!=w&&(p=E(t,w.pos).node),w=R(t,{line:a.line,ch:i.end+1}),null!=w&&(g=I(t,w.pos).node);break;case"string":T=sn.getValue(),w=m(t,{line:a.line,ch:i.start-1}),null!=w&&(d=I(t,w.pos).node);break;default:T=null}null!=T&&(S=T.split(/#\/?SUBJECTLIMIT/),3===S.length&&(T=p?S[0]+S[1].replace("<SUBJECT>",p)+S[2]:S[0]+S[2]),S=T.split(/#\/?SUBJECTCLASSLIMIT/),3===S.length&&(T=b?S[0]+S[1].replace("<SUBJECTCLASSES>",b.join(" "))+S[2]:S[0]+S[2]),S=T.split(/#\/?PROPERTYLIMIT/),3===S.length&&(T=d?S[0]+S[1].replace("<PROPERTY>",d)+S[2]:S[0]+S[2]),S=T.split(/#\/?OBJECTLIMIT/),3===S.length&&(T=g?S[0]+S[1].replace("<OBJECT>",g)+S[2]:S[0]+S[2]),l.query(e.sparqlEndpoint,C(T,"<QUERY>",y)).then(function(e){var n,t,i,l,s,p;for(t=[],i=0,s=(l=e.data.results.bindings).length;s>i;++i)p=l[i],t.push({text:p.iri.value,displayText:o.shortForm(p.iri.value,!1,!0).shortForm,hint:h});n=t,r({list:n,from:CodeMirror.Pos(a.line,u.start),to:CodeMirror.Pos(a.line,c)})},s))}else{for(L=[],P=0,x=(k=n.data.results).length;x>P;++P)A=k[P],L.push(A.prefixedName);v=L,r({list:v,from:CodeMirror.Pos(a.line,u.start),to:CodeMirror.Pos(a.line,c)})}},s);else{switch(d=g=b=y=null,i.type){case"variable-2":T=tn.getValue(),w=R(t,{line:a.line,ch:i.end+1}),null!=w&&(g=E(t,w.pos).node,w=R(t,{line:w.pos.line,ch:w.token.end+1}),null!=w&&(b=I(t,w.pos).node));break;case"keyword":T=an.getValue(),w=m(t,{line:a.line,ch:i.start-1}),null!=w&&(d=E(t,w.pos).node),w=R(t,{line:a.line,ch:i.end+1}),null!=w&&(b=I(t,w.pos).node);break;case"string":T=ln.getValue(),w=m(t,{line:a.line,ch:i.start-1}),null!=w&&(g=I(t,w.pos).node);break;default:T=null}null!=T&&(S=T.split(/#\/?SUBJECTLIMIT/),3===S.length&&(T=d?S[0]+S[1].replace("<SUBJECT>",d)+S[2]:S[0]+S[2]),S=T.split(/#\/?SUBJECTCLASSLIMIT/),3===S.length&&(T=y?S[0]+S[1].replace("<SUBJECTCLASSES>",y.join(" "))+S[2]:S[0]+S[2]),S=T.split(/#\/?PROPERTYLIMIT/),3===S.length&&(T=g?S[0]+S[1].replace("<PROPERTY>",g)+S[2]:S[0]+S[2]),S=T.split(/#\/?OBJECTLIMIT/),3===S.length&&(T=b?S[0]+S[1].replace("<OBJECT>",b)+S[2]:S[0]+S[2]),l.query(e.sparqlEndpoint,C(T,"<QUERY>",i.string)).then(function(e){var n,t,o,l,s,u;for(t=[],o=0,s=(l=e.data.results.bindings).length;s>o;++o)u=l[o],t.push({text:u.iri.value,displayText:u.label.value,hint:h});return n=t,r({list:n,from:CodeMirror.Pos(a.line,i.start),to:CodeMirror.Pos(a.line,c)})},s))}}function T(n){var t;return t=b(n),null!=t.node?(o.setPrefixNsMap(f(e.data)),l.query(e.sparqlEndpoint,C(nn.getValue(),"<IRI>",t.node)).then(function(e){return e.data.results.bindings.length>0?n.markText({line:t.cur.line,ch:t.token.start},{line:t.cur.line,ch:t.token.end},{title:e.data.results.bindings[0].label.value}):void 0},function(){})):void 0}function w(e){var n,t,r,a,i,l;for(n=e.match(W),t="",r=0,a=n.length;a>r;++r)i=n[r],o.getPrefix(i.substring(1,i.length-1))||(l=o.shortForm(i,!1,!0),l.newPrefix&&(t+="@prefix "+l.prefix+": <"+l.ns+"> .\n"),e=C(e,i,l.shortForm));return{newPrefixes:t,data:e}}function S(e){return e.replace(G,"    ").replace(H,"  ")}function v(e){var n,t,r,a,i,l,s,u,c,p,d;for(n="",t=e.split("\n"),r="",a={},i=0,l=t.length;l>i;++i)s=t[i],u=s.match(B),null!=u?(c=o.getPrefix(u[2]),null==c?(o.setPrefixNs(u[1],u),n+=s+"\n"):c!==u[1]&&(a[u[1]]=c)):r+=s+"\n";for(p in a)c=a[p],r=r.replace(new RegExp("(?:^|s)"+(L(p)+":"),"g"),"$1"+c+":");return d=w(S(r)),d.newPrefixes+=n,d}function L(e){return e.replace($,"\\$&")}function C(e,n,t){return e.replace(new RegExp(L(n),"g"),t)}function P(e){var n,t,r,a,o,i;if(e.getSelection())n=e.getCursor("from"),t=e.getCursor("to"),(t.line<n.line||t.line===n.line&&t.ch<n.ch)&&(r=[t,n],n=r[0],t=r[1]);else{for(n=e.getCursor(),0===n.ch&&(n.ch=1),a=e.getTokenAt(n),"variable-3"===a.type?(n.ch=a.end+2,a=e.getTokenAt(n)):"operator"===a.type&&":"===a.string&&(n.ch+=1,a=e.getTokenAt(n));"atom"!==a.type&&"variable-2"!==a.type||"property"!==a.state.curPos;){if(n.ch=a.start-1,-1===n.ch){if(0===n.line)return;n.line--,n.ch=e.getLine(n.line).length}a=e.getTokenAt(n)}for(n=I(e,n).cur,t={line:n.line,ch:n.ch};"punctuation"!==a.type||"."!==a.string;)if(t.ch=a.end+1,a=e.getTokenAt(t),a.end===t.ch-1){if(t.ch=0,t.line++,t.line>e.lastLine())return;a=e.getTokenAt(t)}}for(o=[],i=e.getRange(n,t);n.line<t.line||n.line===t.line&&n.ch<t.ch;)a=e.getTokenAt(n),a.end===n.ch-1&&(n.ch=0,n.line++,a=e.getTokenAt(n)),"atom"!==a.type&&"variable-2"!==a.type||"property"!==a.state.curPos||o.push(E(e,n).node),n.ch=a.end+1;return{iris:o,data:i}}function k(n){var r,a;return r=P(n),r?(a=C(C(en.getValue(),"<IRIS>",r.iris.join(" ")),"<GRAPHIRI>",e.graphIRI),l.update(e.sparulEndpoint,a).then(function(){u(),t.success("Successfully deleted "+r.iris.join(", ")+" in "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" at endpoint "+e.restEndpoint+" .")},s)):t.error("Couldn't find subject IRI(s)")}function x(n){var r,a;return r=P(n),r?(a=C(C(en.getValue(),"<IRIS>",r.iris.join(" ")),"<GRAPHIRI>",e.graphIRI),l.update(e.sparulEndpoint,a).then(function(){l.post(e.restEndpoint,d(e.data)+r.data,e.graphIRI).then(function(){u(),t.success("Successfully replaced "+r.iris.join(", ")+" in "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" at endpoint "+e.restEndpoint+" .")},s)},s)):t.error("Couldn't find subject IRI(s)")}function A(n){var r,a,o;return n.getSelection()?(r=n.getSelection(),a="selection"):(o=P(n),r=o.data,a=o.iris[0]),r?l.post(e.restEndpoint,d(e.data)+r,e.graphIRI).then(function(){return u(),t.success("Successfully inserted "+a+" into "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" at endpoint "+e.restEndpoint+" .")},s):t.error("No data to save")}function O(n,r){var a;return a=b(n),null!=a.node?l.construct(e.sparqlEndpoint,C(K.getValue(),"<IRI>",a.node)).then(function(i){var l,s;return t.success("Successfully loaded "+a.node+" from "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" at endpoint "+e.restEndpoint+" ."),null!=r?(o.setPrefixNsMap(f(i.data)),l=w(S(i.data)),e.data=l.newPrefixes+l.data):(o.setPrefixNsMap(f(e.data)),s=v(i.data),n.replaceRange(s.newPrefixes,{line:c(e.data),ch:0}),n.replaceRange(s.data,{line:n.lastLine()+1,ch:0}))},s):t.error("No IRI under cursor")}function Q(r,a){var i;return i=b(r),null!=i.node?n.get(i.node.substring(1,i.node.length-1),{headers:{Accept:"text/turtle"}}).then(function(n){var l,s;return t.success("Successfully loaded "+i.node+"."),null!=a?(o.setPrefixNsMap(f(n.data)),l=w(S(n.data)),e.data=l.newPrefixes+l.data):(o.setPrefixNsMap(f(e.data)),s=v(n.data),r.replaceRange(s.newPrefixes,{line:c(e.data),ch:0}),r.replaceRange(s.data,{line:r.lastLine()+1,ch:0}))},s):t.error("No IRI under cursor")}var j,q,N,M,F,U,B,V,Y,D,J,X,$,W,G,H,z,_,K,Z,en,nn,tn,rn,an,on,ln,sn;e.config={};for(j in r)q=r[j],e[j]=q;for(j in a)q=a[j],null==r[j]&&(e[j]=q);return e.sparqlEndpointInput=e.sparqlEndpoint,e.restEndpointInput=e.restEndpoint,e.graphIRIInput=null!==e.graphIRI?e.graphIRI:"default",e.$watch("config",function(e,n){return e!==n?a.confing=e:void 0}),e.$watch("graphIRIInput",function(n){return e.graphIRI="default"!==n?n:null}),e.$watch("graphIRI",function(e,n){return e!==n?a.graphIRI=e:void 0}),e.sparqlEndpointInputValid=!0,N=null,e.$watch("sparqlEndpointInput",function(n){var t;return null!=n?(null!=t&&t.resolve(),t=i.defer(),l.check(n,{timeout:t.promise}).then(function(n){return e.sparqlEndpointInputValid=n},function(){return e.sparqlEndpointInputValid=!1})):void 0}),e.sparulEndpointInputValid=!0,M=null,e.$watch("sparulEndpointInput",function(n){var t;return null!=n?(null!=t&&t.resolve(),t=i.defer(),l.checkUpdate(n,{timeout:t.promise}).then(function(n){return e.sparulEndpointInputValid=n},function(){return e.sparulEndpointInputValid=!1})):void 0}),e.restEndpointInputValid=!0,F=null,e.$watch("restEndpointInput",function(n){var t;return null!=n?(null!=t&&t.resolve(),t=i.defer(),l.checkRest(n,{timeout:t.promise}).then(function(n){return e.restEndpointInputValid=n},function(){return e.restEndpointInputValid=!1})):void 0}),e.$watch("sparqlEndpoint",function(n,t){return e.sparqlEndpointInput=n,n!==t&&(a.sparqlEndpoint=n,e.restEndpoint&&""!==e.restEndpoint&&e.restEndpoint!==t?e.restEndpoint.replace("data","sparql")===t&&(e.restEndpoint=n.replace("sparql","data")):e.restEndpoint=n,e.sparulEndpoint&&""!==e.sparulEndpoint&&e.sparulEndpoint!==t?e.sparulEndpoint.replace("update","sparql")===t&&(e.sparulEndpoint=n.replace("sparql","update")):e.sparulEndpoint=n),null!=n?u():void 0}),e.$watch("restEndpoint",function(n,t){if(e.restEndpointInput=n,n!==t){if(a.restEndpoint=n,e.sparqlEndpoint&&""!==e.sparqlEndpoint&&e.sparqlEndpoint!==t?e.sparqlEndpoint.replace("sparql","data")===t&&(e.sparqlEndpoint=n.replace("data","sparql")):e.sparqlEndpoint=n,!e.sparulEndpoint||""===e.sparulEndpoint||e.sparulEndpoint===t)return e.sparulEndpoint=n;if(e.sparulEndpoint.replace("update","data")===t)return e.sparulEndpoint=n.replace("data","update")}}),e.$watch("sparulEndpoint",function(n,t){if(e.sparulEndpointInput=n,n!==t){if(a.sparulEndpoint=n,e.restEndpoint&&""!==e.restEndpoint&&e.restEndpoint!==t?e.restEndpoint.replace("data","update")===t&&(e.restEndpoint=n.replace("update","data")):e.restEndpoint=n,!e.sparqlEndpoint||""===e.sparqlEndpoint||e.sparqlEndpoint===t)return e.sparqlEndpoint=n;if(e.sparqlEndpoint.replace("sparql","update")===t)return e.sparqlEndpoint=n.replace("update","sparql")}}),e.$watch("data",function(e,n){return e!==n?(a.data=e,g(V)):void 0}),U=null,B=new RegExp("^\\s*@prefix\\s+([^:]+):\\s*<(.+)>","i"),y.async=!0,CodeMirror.registerHelper("wordChars","turtle",/[-\\w:<>\\#\\/\\.]/),V={},e.codemirrorLoaded=function(e){return V=e,V.on("cursorActivity",T)},Y=CodeMirror.keyMap["default"]===CodeMirror.keyMap.pcDefault?"Ctrl-":"Cmd-",D=CodeMirror.keyMap["default"]===CodeMirror.keyMap.pcDefault?"Alt-":"Option-",e.commands=[],e.commands.push({key:"Ctrl-Space",command:"Autocomplete"}),e.commands.push({key:Y+"F",command:"Find"}),e.commands.push({key:Y+"G",command:"Find next"}),e.commands.push({key:Y+"Shift-G",command:"Find previous"}),e.commands.push({key:Y+("Option-"===D?D:"Shift")+"-F",command:"Replace"}),e.commands.push({key:Y+("Option-"===D?D+"Shift-F":"Shift-R"),command:"Replace all"}),e.commands.push({key:Y+"J",command:"Toggle code folding"}),e.commands.push({key:Y+"K",command:"Fold all"}),e.commands.push({key:Y+"L",command:"Load IRI from endpoint"}),e.commands.push({key:Y+D+"L",command:"Load IRI direct"}),e.commands.push({key:Y+"Enter",command:"Replace editor contents with IRI from endpoint"}),e.commands.push({key:Y+D+"Enter",command:"Replace editor contents with IRI direct"}),e.commands.push({key:Y+"S",command:"Save current subject/selection to endpoint"}),e.commands.push({key:Y+D+"S",command:"Replace current subject/selection at endpoint"}),e.commands.push({key:Y+D+"Backspace",command:"Delete current subject/selection at endpoint"}),e.commands.push({key:Y+D+"O",command:"Toggle fullscreen mode"}),J={},J["Ctrl-Space"]="autocomplete",J[Y+"J"]=function(e){return e.foldCode(e.getCursor())},X=!1,J[Y+"K"]=function(e){var n;return n?CodeMirror.commands.unfoldAll(e):CodeMirror.commands.foldAll(e),n=!n},J[Y+"S"]=function(e){return A(e)},J[Y+"Alt-S"]=function(e){return x(e)},J[Y+"Alt-Backspace"]=function(e){return k(e)},J[Y+"L"]=function(e){return O(e)},J[Y+"Alt-L"]=function(e){return Q(e)},J[Y+"Enter"]=function(e){return O(e,!0)},J[Y+"Alt-Enter"]=function(e){return Q(e,!0)},J[Y+"Alt-O"]=function(e){return e.setOption("fullScreen",!e.getOption("fullScreen"))},J.ESC=function(e){return e.getOption("fullScreen")?e.setoption("fullScreen",!1):void 0},e.editorOptions={lineWrapping:!0,lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,showTrailingSpace:!0,styleActiveLine:!0,syntaxErrorCheck:!0,hintOptions:{hint:y},highlightSelectionMatches:{showToken:/\w/},foldGutter:{rangeFinder:CodeMirror.fold.indent},gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],extraKeys:J},$=new RegExp("[-/\\^$*+?.!|[]{}]","g"),W=new RegExp("<.*?>","g"),G=new RegExp("        ","g"),H=new RegExp("    ","g"),e.loadGraph=function(){return e.loading?void 0:(e.loading=!0,l.get(e.restEndpoint,e.graphIRI).then(function(n){var r;return e.loading=!1,o.setPrefixNsMap(f(n.data)),r=w(S(n.data)),e.data=r.newPrefixes+r.data,t.success("Successfully loaded "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" from endpoint "+e.restEndpoint+" .")},function(n){return e.loading=!1,s(n)}))},e.postGraph=function(){return e.inserting?void 0:(e.inserting=!0,l.post(e.restEndpoint,e.data,e.graphIRI).then(function(){return e.inserting=!1,u(),t.success("Successfully inserted data into "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" at endpoint "+e.restEndpoint+" .")},function(n){return e.inserting=!1,s(n)}))},e.putGraph=function(){return e.replacing?void 0:(e.replacing=!0,l.put(e.restEndpoint,e.data,e.graphIRI).then(function(){return e.replacing=!1,u(),t.success("Successfully replaced "+(e.graphIRI?"graph "+e.graphIRI:"default graph")+" at endpoint "+e.restEndpoint+" .")},function(n){return e.replacing=!1,s(n)}))},z={describeQuery:"CONSTRUCT { <IRI> ?p ?o } WHERE { <IRI> ?p ?o }",deleteResourceQuery:"DELETE { ?s ?p ?o } WHERE { \n	VALUES ?s { <IRIS> }\n	?s ?p ?o .\n}",labelQuery:"PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT ?label {\n	<IRI> rdfs:label|skos:prefLabel|skos:altLabel ?label .\n}\nLIMIT 1",subjectLabelQuery:'PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri ?label {\n	?iri rdfs:label|skos:prefLabel|skos:altLabel ?label .\n	FILTER(STRSTARTS(LCASE(?label),LCASE("<QUERY>")))\n}\nORDER BY ?label',subjectIRIQuery:'PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri {\n	{ ?iri ?p ?o }\n	UNION\n	{ ?s ?iri ?o }\n	UNION\n	{ ?s ?p ?iri }\n	FILTER(STRSTARTS(LCASE(STR(?iri)),LCASE("<QUERY>")))\n}\nORDER BY ?iri',propertyLabelQuery:'PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nSELECT DISTINCT ?iri ?label {\n	?iri rdfs:label|skos:prefLabel|skos:altLabel ?label .\n	FILTER(STRSTARTS(LCASE(?label),LCASE("<QUERY>")))\n	{\n		?iri a rdf:Property .\n	} UNION {\n		?iri a owl:DatatypeProperty .\n	} UNION {\n		?iri a owl:ObjectProperty .\n	} UNION {\n		?s ?iri ?o .\n	}\n}\nORDER BY ?label',propertyIRIQuery:'PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nSELECT DISTINCT ?iri {\n	{\n		?iri a rdf:Property .\n	} UNION {\n		?iri a owl:DatatypeProperty .\n	} UNION {\n		?iri a owl:ObjectProperty .\n	} UNION {\n		?s ?iri ?o .\n	}\n	FILTER(STRSTARTS(LCASE(STR(?iri)),LCASE("<QUERY>")))\n}\nORDER BY ?iri',objectLabelQuery:'PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri ?label {\n	?iri rdfs:label|skos:prefLabel|skos:altLabel ?label .\n	FILTER(STRSTARTS(LCASE(?label),LCASE("<QUERY>")))\n}\nORDER BY ?label',objectIRIQuery:'PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri {\n	{ ?iri ?p ?o }\n	UNION\n	{ ?s ?iri ?o }\n	UNION\n	{ ?s ?p ?iri }\n	FILTER(STRSTARTS(LCASE(STR(?iri)),LCASE("<QUERY>")))\n}\nORDER BY ?iri'},_={describeQuery:"CONSTRUCT { <IRI> ?p ?o } WHERE { <IRI> ?p ?o }",deleteResourceQuery:"DELETE { ?s ?p ?o } WHERE { \n	VALUES ?s { <IRIS> }\n	?s ?p ?o .\n}",labelQuery:"PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT ?label {\n	<IRI> rdfs:label|skos:prefLabel|skos:altLabel ?label .\n}\nLIMIT 1",subjectLabelQuery:'PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri ?label {\n	#PROPERTYLIMIT\n		<PROPERTY> rdfs:domain ?domain .\n		?iri a/rdfs:subClassOf* ?domain .\n	#/PROPERTYLIMIT\n	#OBJECTLIMIT\n		<OBJECT> a ?objectClass .\n		?property rdfs:range ?objectClass .\n	#/OBJECTLIMIT\n	?iri rdfs:label|skos:prefLabel|skos:altLabel ?label .\n	FILTER(STRSTARTS(LCASE(?label),LCASE("<QUERY>")))\n}\nORDER BY ?label',subjectIRIQuery:'PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri {\n	#PROPERTYLIMIT\n		<PROPERTY> rdfs:domain ?domain .\n		?iri a/rdfs:subClassOf* ?domain .\n	#/PROPERTYLIMIT\n	#OBJECTLIMIT\n		<OBJECT> a ?objectClass .\n		?property rdfs:range ?objectClass .\n	#/OBJECTLIMIT\n	{ ?iri ?p ?o }\n	UNION\n	{ ?s ?iri ?o }\n	UNION\n	{ ?s ?p ?iri }\n	FILTER(STRSTARTS(LCASE(STR(?iri)),LCASE("<QUERY>")))\n}\nORDER BY ?iri',propertyLabelQuery:'PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nSELECT DISTINCT ?iri ?label {\n	#SUBJECTLIMIT\n		<SUBJECT> a ?subjectClass .\n		?iri rdfs:domain ?subjectClass .\n	#/SUBJECTLIMIT\n	#SUBJECTCLASSLIMIT\n		VALUES ?subjectClass {\n			<SUBJECTCLASSES>\n		}\n		?iri rdfs:domain ?subjectClass .\n	#/SUBJECTCLASSLIMIT\n	#OBJECTLIMIT\n		<OBJECT> a ?objectClass .\n		?iri rdfs:range ?objectClass .\n	#/OBJECTLIMIT\n	?iri rdfs:label|skos:prefLabel|skos:altLabel ?label .\n	FILTER(STRSTARTS(LCASE(?label),LCASE("<QUERY>")))\n	{\n		?iri a rdf:Property .\n	} UNION {\n		?iri a owl:DatatypeProperty .\n	} UNION {\n		?iri a owl:ObjectProperty .\n	} UNION {\n		?s ?iri ?o .\n	}\n}\nORDER BY ?label',propertyIRIQuery:'PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nSELECT DISTINCT ?iri {\n	#SUBJECTLIMIT\n		<SUBJECT> a ?subjectClass .\n		?iri rdfs:domain ?subjectClass .\n	#/SUBJECTLIMIT\n	#SUBJECTCLASSLIMIT\n		VALUES ?subjectClass {\n			<SUBJECTCLASSES>\n		}\n		?iri rdfs:domain ?subjectClass .\n	#/SUBJECTCLASSLIMIT\n	#OBJECTLIMIT\n		<OBJECT> a ?objectClass .\n		?iri rdfs:range ?objectClass .\n	#/OBJECTLIMIT\n	{\n		?iri a rdf:Property .\n	} UNION {\n		?iri a owl:DatatypeProperty .\n	} UNION {\n		?iri a owl:ObjectProperty .\n	} UNION {\n		?s ?iri ?o .\n	}\n	FILTER(STRSTARTS(LCASE(STR(?iri)),LCASE("<QUERY>")))\n}\nORDER BY ?iri',objectLabelQuery:'PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri ?label {\n	#PROPERTYLIMIT\n		<PROPERTY> rdfs:range ?domain .\n		?iri a/rdfs:subClassOf* ?domain .\n	#/PROPERTYLIMIT\n	?iri rdfs:label|skos:prefLabel|skos:altLabel ?label .\n	FILTER(STRSTARTS(LCASE(?label),LCASE("<QUERY>")))\n}\nORDER BY ?label',objectIRIQuery:'PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT DISTINCT ?iri {\n	#PROPERTYLIMIT\n		<PROPERTY> rdfs:range ?domain .\n		?iri a/rdfs:subClassOf* ?domain .\n	#/PROPERTYLIMIT\n	{ ?iri ?p ?o }\n	UNION\n	{ ?s ?iri ?o }\n	UNION\n	{ ?s ?p ?iri }\n	FILTER(STRSTARTS(LCASE(STR(?iri)),LCASE("<QUERY>")))\n}\nORDER BY ?iri'},K=new YASQE(document.getElementById("describeQuery"),{value:z.describeQuery,createShareLink:null}),null!=(null!=(Z=r.config)?Z.describeQuery:void 0)&&K.setValue(r.config.describeQuery),en=new YASQE(document.getElementById("deleteResourceQuery"),{value:z.deleteResourceQuery,createShareLink:null}),nn=new YASQE(document.getElementById("labelQuery"),{value:z.labelQuery,createShareLink:null}),null!=(null!=(Z=r.config)?Z.labelQuery:void 0)&&nn.setValue(r.config.labelQuery),tn=new YASQE(document.getElementById("subjectLabelQuery"),{value:z.subjectLabelQuery,createShareLink:null}),null!=(null!=(Z=r.config)?Z.subjectLabelQuery:void 0)&&tn.setValue(r.config.subjectLabelQuery),rn=new YASQE(document.getElementById("subjectIRIQuery"),{value:z.subjectIRIQuery,createShareLink:null}),null!=(null!=(Z=r.config)?Z.subjectIRIQuery:void 0)&&rn.setValue(r.config.subjectIRIQuery),an=new YASQE(document.getElementById("propertyLabelQuery"),{value:z.propertyLabelQuery,createShareLink:null}),null!=(null!=(Z=r.config)?Z.propertyLabelQuery:void 0)&&an.setValue(r.config.propertyLabelQuery),on=new YASQE(document.getElementById("propertyIRIQuery"),{value:z.propertyIRIQuery,createShareLink:null}),null!=(null!=(Z=r.config)?Z.propertyIRIQuery:void 0)&&on.setValue(r.config.propertyIRIQuery),ln=new YASQE(document.getElementById("objectLabelQuery"),{value:z.objectLabelQuery,createShareLink:null}),null!=(null!=(Z=r.config)?Z.objectLabelQuery:void 0)&&ln.setValue(r.config.objectLabelQuery),sn=new YASQE(document.getElementById("objectIRIQuery"),{value:z.objectIRIQuery,createShareLink:null}),null!=(null!=(Z=r.config)?Z.objectIRIQuery:void 0)&&sn.setValue(r.config.objectIRIQuery),e.loadLooseDefaults=function(){return K.setValue(z.describeQuery),en.setValue(z.deleteResourceQuery),nn.setValue(z.labelQuery),tn.setValue(z.subjectLabelQuery),rn.setValue(z.subjectIRIQuery),an.setValue(z.propertyLabelQuery),on.setValue(z.propertyIRIQuery),ln.setValue(z.objectLabelQuery),sn.setValue(z.objectIRIQuery)
},e.loadStrictDefaults=function(){return K.setValue(_.describeQuery),en.setValue(_.deleteResourceQuery),nn.setValue(_.labelQuery),tn.setValue(_.subjectLabelQuery),rn.setValue(_.subjectIRIQuery),an.setValue(_.propertyLabelQuery),on.setValue(_.propertyIRIQuery),ln.setValue(_.objectLabelQuery),sn.setValue(_.objectIRIQuery)}}])}.call(this),function(e){try{e=angular.module("app")}catch(n){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("partials/main.html",'<a href="https://github.com/jiemakel/snapper"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"/></a>\n<div class="ui page grid">\n  <div class="column">\n    <h1 class="ui header center aligned">Snapper Turtle Editor</h1>\n    <div class="ui segment">\n      <div ng-show="showError" ng-click="showError=false" class="ui floating error message fade transition"><i class="close icon"></i>\n        <div class="header">{{errorSource}} returned error {{errorStatus}}:</div>{{errorMessage}}<br/>for request:<br/>{{errorRequest}}\n      </div>\n      <div class="ui form">\n        <div id="commands-container">\n          <div id="commands" style="" ng-mouseenter="showCommands=true" ng-mouseleave="showCommands=false" class="ui segment teal label"><i class="right floating icon info"> Keyboard commands</i>\n            <div ng-show="showCommands" class="ui small bulleted list">\n              <div ng-repeat="command in commands" class="item">{{command.key}}: {{command.command}}</div>\n            </div>\n          </div>\n        </div>\n        <div class="field">\n          <label>Editor</label>\n          <div ui-codemirror="{ onLoad : codemirrorLoaded }" ui-codemirror-opts="editorOptions" ng-model="data"></div>\n        </div>\n        <div class="field">\n          <label>Graph IRI</label>\n          <input type="text" list="graphIRIs" ng-model="graphIRIInput" style="width:20em"/>\n          <datalist id="graphIRIs">\n            <option ng-repeat="graph in graphs" label="{{graph.triples.value | number}} triples">{{graph.graphIRI.value || \'default\'}}</option>\n          </datalist>\n        </div>\n        <div class="field">\n          <button ng-class="loading ? &quot;loading&quot; : &quot;&quot;" ng-click="loadGraph()" class="ui green button">Load</button>\n          <button ng-class="inserting ? &quot;loading&quot; : &quot;&quot;" ng-click="postGraph()" class="ui orange button">Insert</button>\n          <button ng-class="replacing ? &quot;loading&quot; : &quot;&quot;" ng-click="putGraph()" class="ui red button">Replace</button>\n        </div>\n        <div class="ui three column grid">\n          <div ng-class="{ \'error\': !restEndpointInputValid }" class="field column">\n            <label>SPARQL graph store protocol endpoint</label>\n            <input type="text" ng-model="restEndpointInput" ng-blur="restEndpoint = restEndpointInputValid ? restEndpointInput : restEndpoint"/>\n          </div>\n          <div ng-class="{ \'error\': !sparqlEndpointInputValid }" class="field column">\n            <label>SPARQL query endpoint</label>\n            <input type="text" ng-model="sparqlEndpointInput" ng-blur="sparqlEndpoint = sparqlEndpointInputValid ? sparqlEndpointInput : sparqlEndpoint"/>\n          </div>\n          <div ng-class="{ \'error\': !sparulEndpointInputValid }" class="field column">\n            <label>SPARQL update endpoint</label>\n            <input type="text" ng-model="sparulEndpointInput" ng-blur="sparulEndpoint = sparulEndpointInputValid ? sparulEndpointInput : sparulEndpoint"/>\n          </div>\n        </div><i ng-mouseenter="showInfo=true" ng-mouseleave="showInfo=false" class="icon info"></i><span ng-show="showInfo">If your endpoint isn\'t working, it may not be setting appropriate CORS headers. If so, you can try it with \'http://ldf.fi/corsproxy/\'\' prepended (e.g. http://ldf.fi/corsproxy/dbpedia.org/sparql)</span>\n      </div>\n      <div style="margin-top:1em">\n        <button ng-click="showConfiguration=!showConfiguration" class="tiny ui button">Configure queries</button>\n      </div>\n      <div ng-show="showConfiguration" class="ui segment">\n        <div class="ui header">Configure SPARQL queries</div>\n        <div style="max-height:100%;overflow:scroll;display:block;" class="content">\n          <div class="ui form">\n            <div class="field">\n              <label>Label query</label>\n              <div id="labelQuery"></div>\n            </div>\n            <div class="field">\n              <label>Load resource query</label>\n              <div id="describeQuery"></div>\n            </div>\n            <div class="field">\n              <label>Delete resource(s) query</label>\n              <div id="deleteResourceQuery"></div>\n            </div>\n            <div class="field">\n              <label>Subject label autocompletion query</label>\n              <div id="subjectLabelQuery"></div>\n            </div>\n            <div class="field">\n              <label>Property label autocompletion query</label>\n              <div id="propertyLabelQuery"></div>\n            </div>\n            <div class="field">\n              <label>Object label autocompletion query</label>\n              <div id="objectLabelQuery"></div>\n            </div>\n            <div class="field">\n              <label>Subject IRI autocompletion query</label>\n              <div id="subjectIRIQuery"></div>\n            </div>\n            <div class="field">\n              <label>Property IRI autocompletion query</label>\n              <div id="propertyIRIQuery"></div>\n            </div>\n            <div class="field">\n              <label>Object IRI autocompletion query</label>\n              <div id="objectIRIQuery"></div>\n            </div>\n            <div class="field">\n              <button ng-click="loadLooseDefaults()" class="ui green button">Load loose defaults</button>\n              <button ng-click="loadStrictDefaults()" class="ui orange button">Load strict defaults</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>')}])}();